<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>fsmcontainers &#8212; fsmcontainers 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
     
    
    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
    
    <div class=indexwrapper>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">fsmcontainers 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-fsmcontainers.fsmcontainers">
<span id="fsmcontainers"></span><h1>fsmcontainers<a class="headerlink" href="#module-fsmcontainers.fsmcontainers" title="Permalink to this headline">¶</a></h1>
<p>This module provides two classes:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a>, a finite-state acceptor that behaves like a Python set.</li>
<li><a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a>, a finite-state transducer that behaves like a Python dict.</li>
</ul>
</div></blockquote>
<p>These offer a Pythonic interface for using finite-state linguistic
resources or hand-coding new ones.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;piglatin.fst&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>   <span class="n">piglatin</span> <span class="o">=</span> <span class="n">fsa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sentence</span> <span class="o">=</span> <span class="s1">&#39;do you speak pig latin&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">piglatin</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">sentence</span><span class="o">.</span><span class="n">split</span><span class="p">()])</span>
<span class="go">&#39;oday ouyay eakspay igpay atinlay&#39;</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sentence</span> <span class="o">=</span> <span class="s1">&#39;Pig Latin, or &quot;{pig latin},&quot; is spoken by...&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sentence</span><span class="o">.</span><span class="n">format_map</span><span class="p">(</span><span class="n">piglatin</span><span class="p">)</span>
<span class="go">&#39;Pig Latin, or &quot;igpay atinlay,&quot; is spoken by...&#39;</span>
</pre></div>
</div>
<p>They are <strong>not</strong> meant to be high-performance replacements for
built-in <code class="xref py py-class docutils literal"><span class="pre">set</span></code> and <code class="xref py py-class docutils literal"><span class="pre">dict</span></code>.  For very large finite sets of strings
or mappings between strings, use askdhfa.  For high-performance
potentially-infinite sets of strings, you may be able to use regular
expressions, with <code class="xref py py-func docutils literal"><span class="pre">re.match()</span></code> as a test of set membership.</p>
<p>Both classes provide additional operations that are useful in computational
morphology, including cross product (<code class="docutils literal"><span class="pre">*</span></code>), composition (<code class="docutils literal"><span class="pre">&#64;</span></code>),
and methods for constructing context-dependent rewrite rules (<code class="xref py py-meth docutils literal"><span class="pre">fst.before()</span></code>,
<code class="xref py py-meth docutils literal"><span class="pre">fst.after()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">fst.between()</span></code>, and <code class="xref py py-meth docutils literal"><span class="pre">fst.anywhere()</span></code>).</p>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#finite-state-acceptors">Finite state acceptors</a></li>
<li><a class="reference internal" href="#finite-state-transducers">Finite state transducers</a></li>
<li><a class="reference internal" href="#shared-operations">Shared operations</a> which apply to both acceptors and transducers</li>
<li><a class="reference internal" href="#linguistic-applications">Linguistic applications</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="finite-state-acceptors">
<h2>Finite state acceptors<a class="headerlink" href="#finite-state-acceptors" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="fsmcontainers.fsmcontainers.fsa">
<em class="property">class </em><code class="descname">fsa</code><span class="sig-paren">(</span><em>iterable</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fsa"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fsa" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descname">fsa</code><span class="sig-paren">(</span><em>*items</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fsa"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Return a new finite state acceptor. The acceptor behaves like a set whose
elements are <em>items</em>, or are taken from <em>iterator.</em> Elements must all be
strings, or must all be members of another class that implements
<code class="docutils literal"><span class="pre">fsm_serialize</span></code> and <code class="docutils literal"><span class="pre">fsm_deserialize</span></code> methods for
conversion to and from strings.</p>
<p>If no arguments are specified, the result is an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> that
behaves like an empty set.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<p>If one or more arguments are specified, and all are valid elements, they
become elements of the <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">(</span><span class="s1">&#39;a single long string argument&#39;</span><span class="p">)</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">fsa([&#39;a single long string argument&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
<p>If a single iterable is specified, and its items are valid elements, they
become elements of the <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;sequence&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;short&#39;</span><span class="p">,</span> <span class="s1">&#39;strings&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">==</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;sequence&#39;</span><span class="p">,</span> <span class="s1">&#39;of&#39;</span><span class="p">,</span> <span class="s1">&#39;short&#39;</span><span class="p">,</span> <span class="s1">&#39;strings&#39;</span><span class="p">])</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Unlike sets, acceptors can have an infinite number of elements. But
iterables passed to <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> are eagerly evaluated, and so must be
finite.  If, for instance, <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> is passed a generator that never
raises <code class="docutils literal"><span class="pre">StopIteration</span></code>, it will draw new values endlessly and never
return.  To create a new infinite acceptor, use <code class="xref py py-meth docutils literal"><span class="pre">plus()</span></code> or <code class="xref py py-meth docutils literal"><span class="pre">star()</span></code>
on a finite acceptor, or use other operations on an existing infinite
acceptor. <a class="footnote-reference" href="#f1" id="id1">[1]</a></p>
<p>Instances of <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> provide all the same operations as built-in
Python <code class="xref py py-class docutils literal"><span class="pre">set</span></code>, and compare equal to built-in sets with the same
elements:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fsa</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s1">&#39;three&#39;</span><span class="p">,</span> <span class="s1">&#39;four&#39;</span><span class="p">,</span> <span class="s1">&#39;five&#39;</span><span class="p">}</span>
<span class="go">fsa(&#39;three&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fsa</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">}</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fsa</span><span class="p">(</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">{</span><span class="s1">&#39;one&#39;</span><span class="p">}</span>
<span class="go">True</span>
</pre></div>
</div>
<p>In addition, instances of <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> provide all of the <a class="reference internal" href="#shared-operations">shared
operations</a>, as well as the following operation:</p>
<dl class="describe">
<dt>
<code class="descname">this * other</code></dt>
<dd></dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fsa.cross">
<code class="descname">cross</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fsa.cross"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fsa.cross" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a> representing the cross product of <em>this</em>
and <em>other.</em> The resulting fst maps each value in <em>this</em> to each value
in <em>other</em>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">this</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">other</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">((</span><span class="n">this</span> <span class="o">*</span> <span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;a&#39;, &#39;1&#39;), (&#39;a&#39;, &#39;2&#39;), (&#39;b&#39;, &#39;1&#39;), (&#39;b&#39;, &#39;2&#39;)]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="finite-state-transducers">
<h2>Finite state transducers<a class="headerlink" href="#finite-state-transducers" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="fsmcontainers.fsmcontainers.fst">
<em class="property">class </em><code class="descname">fst</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fst"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fst" title="Permalink to this definition">¶</a></dt>
<dt>
<em class="property">class </em><code class="descname">fst</code><span class="sig-paren">(</span><em>mapping</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dt>
<em class="property">class </em><code class="descname">fst</code><span class="sig-paren">(</span><em>iterable</em>, <em>**kwargs</em><span class="sig-paren">)</span></dt>
<dd><p>Return a new finite state transducer. The transducer behaves like a
dictionary or other mapping object, and <a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a> can be called with any
of the same argument combinations as <code class="xref py py-class docutils literal"><span class="pre">dict</span></code>, with the same semantics
&#8212; subject only to the restriction that its keys and values must be strings,
or must be serializable to strings.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">fst</span><span class="p">([(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">)],</span> <span class="n">e</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="n">g</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
<span class="go">&#39;b&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="s1">&#39;e&#39;</span><span class="p">]</span>
<span class="go">&#39;f&#39;</span>
</pre></div>
</div>
<p>In addition, fsts can map a single key to more than one value.  To create an
<a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a> with this property, call the constructor with an iterable as
its positional argument, or use keyword arguments that &#8220;shadow&#8221; keys in the
positional argument.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">fst</span><span class="p">([(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">fst</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">},</span> <span class="n">a</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
<span class="go">True</span>
</pre></div>
</div>
<p>When an fst maps a single key to more than one value, subscripting with
that key will return one arbitrary value.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">fst</span><span class="p">([(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">}</span>
<span class="go">True</span>
</pre></div>
</div>
<p>In addition to the standard Python dictionary operations, fsts provide
the following:</p>
<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fst.getall">
<code class="descname">getall</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#fsmcontainers.fsmcontainers.fst.getall" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="describe">
<dt>
<code class="descname">t.all[key]</code></dt>
<dd><p>Return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> containing all the values corresponding to <em>key</em>,
rather than just one.</p>
</dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fst.query">
<code class="descname">query</code><span class="sig-paren">(</span><em>iterable</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fst.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fst.query" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="descname">query</code><span class="sig-paren">(</span><em>string</em><span class="sig-paren">)</span></dt>
<dd><p>Treat non-string <em>iterable</em> as a collection of keys, or <em>string</em> as a single
key, and return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> containing all the values which
correspond to any key.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">fst</span><span class="p">([(</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;II&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;III&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">),</span>
<span class="gp">... </span>             <span class="p">(</span><span class="s1">&#39;IV&#39;</span><span class="p">,</span> <span class="s1">&#39;four&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;V&#39;</span><span class="p">,</span> <span class="s1">&#39;five&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;IV&#39;</span><span class="p">)</span>
<span class="go">fsa([&#39;four&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="s1">&#39;IV&#39;</span><span class="p">))</span>
<span class="go">fsa([&#39;one&#39;, &#39;five&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">query</span><span class="p">({</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;III&#39;</span><span class="p">})</span>
<span class="go">fsa([&#39;one&#39;, &#39;three&#39;])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fst.keyset">
<code class="descname">keyset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fst.keyset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fst.keyset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the keys in the current instance as an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> rather than
an iterator.</p>
</dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fst.valueset">
<code class="descname">valueset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fst.valueset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fst.valueset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the values in the current instance as an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> rather than
an iterator.</p>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">this + other</code></dt>
<dd><p>Return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a> whose key-value pairs consist of
key-value pairs from <em>this</em> concatenated with key-value pairs from <em>other</em>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fst</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;b&#39;</span><span class="p">})</span> <span class="o">+</span> <span class="n">fst</span><span class="p">({</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">})</span>
<span class="go">fst([(&#39;ac&#39;, &#39;bd&#39;)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fst.compose">
<code class="descname">compose</code><span class="sig-paren">(</span><em>*others</em><span class="sig-paren">)</span><a class="headerlink" href="#fsmcontainers.fsmcontainers.fst.compose" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="describe">
<dt>
<code class="descname">this &#64; other ...</code></dt>
<dd><p>Return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a> whose key-value mapping comes from composing
<em>this</em> with each of the others in turn.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">fst</span><span class="p">({</span><span class="s1">&#39;input&#39;</span><span class="p">:</span> <span class="s1">&#39;intermediate&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">fst</span><span class="p">({</span><span class="s1">&#39;intermediate&#39;</span><span class="p">:</span> <span class="s1">&#39;output&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">@</span> <span class="n">t</span>
<span class="go">fst([(&#39;input&#39;, &#39;output&#39;)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fst.union">
<code class="descname">union</code><span class="sig-paren">(</span><em>*others</em><span class="sig-paren">)</span><a class="headerlink" href="#fsmcontainers.fsmcontainers.fst.union" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="describe">
<dt>
<code class="descname">this | other ...</code></dt>
<dd><p>Return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a> with key-value pairs from this and all
others.</p>
</dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fst.priority_union">
<code class="descname">priority_union</code><span class="sig-paren">(</span><em>*others</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fst.priority_union"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fst.priority_union" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="describe">
<dt>
<code class="descname">this &gt;&gt; other ...</code></dt>
<dd></dd></dl>

<dl class="describe">
<dt>
<code class="descname">... other &lt;&lt; this</code></dt>
<dd><p>Return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a> that behaves like a <code class="xref py py-class docutils literal"><span class="pre">collections.ChainMap</span></code>,
chaining together multiple underlying mappings. For each key, the underlying
mappings are searched in turn, and the key is mapped to the first
corresponding value that is found. Suppose the mappings <em>f</em>, <em>g</em>, and
<em>h</em> are as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">fst</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">fst</span><span class="p">({</span><span class="s2">&quot;a&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span>           <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h</span> <span class="o">=</span> <span class="n">fst</span><span class="p">({</span>          <span class="s2">&quot;b&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">})</span>
</pre></div>
</div>
<p>Then the result of a priority union will be as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">&gt;&gt;</span> <span class="n">g</span> <span class="o">&gt;&gt;</span> <span class="n">h</span>
<span class="go">fst([(&quot;a&quot;, &quot;1&quot;), (&quot;b&quot;, &quot;1&quot;), (&quot;c&quot;, &quot;2&quot;), (&quot;d&quot;, &quot;3&quot;)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">&lt;&lt;</span> <span class="n">g</span> <span class="o">&lt;&lt;</span> <span class="n">h</span>
<span class="go">fst([(&quot;a&quot;, &quot;2&quot;), (&quot;b&quot;, &quot;3&quot;), (&quot;c&quot;, &quot;3&quot;), (&quot;d&quot;, &quot;3&quot;)])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fst.star">
<code class="descname">star</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fsmcontainers.fsmcontainers.fst.star" title="Permalink to this definition">¶</a></dt>
<dt id="fsmcontainers.fsmcontainers.fst.plus">
<code class="descname">plus</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#fsmcontainers.fsmcontainers.fst.plus" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a> whose key-value pairs consist of
key-value pairs from the current instance concatenated together zero or
more times (for <cite>star</cite>), or one or more times (for <cite>plus</cite>).</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="shared-operations">
<h2>Shared operations<a class="headerlink" href="#shared-operations" title="Permalink to this headline">¶</a></h2>
<p>Both <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a>s and <a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a>s are instances of <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsmcontainer" title="fsmcontainers.fsmcontainers.fsmcontainer"><code class="xref py py-class docutils literal"><span class="pre">fsmcontainer</span></code></a>
and provide the following operations:</p>
<dl class="class">
<dt id="fsmcontainers.fsmcontainers.fsmcontainer">
<em class="property">class </em><code class="descname">fsmcontainer</code><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fsmcontainer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fsmcontainer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="describe">
<dt>
<code class="descname">this + other ...</code></dt>
<dd></dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fsmcontainer.concatenate">
<code class="descname">concatenate</code><span class="sig-paren">(</span><em>*others</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fsmcontainer.concatenate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fsmcontainer.concatenate" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> whose elements are made up of an element
of <em>s</em> concatenated with an element of <em>t</em>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">this</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">other</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">this</span> <span class="o">+</span> <span class="n">other</span><span class="p">)</span>
<span class="go">[&#39;ac&#39;, &#39;ad&#39;, &#39;bc&#39;, &#39;bd&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fsmcontainer.star">
<code class="descname">star</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fsmcontainer.star"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fsmcontainer.star" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> whose elements are made by concatenating
together zero or more elements from the current instance.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">star</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">s</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;babbbbaabaaaaa&#39;</span> <span class="ow">in</span> <span class="n">s</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span> <span class="ow">in</span> <span class="n">s</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;c&#39;</span> <span class="ow">in</span> <span class="n">s</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fsmcontainer.plus">
<code class="descname">plus</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fsmcontainer.plus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fsmcontainer.plus" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> whose elements are made by concatenating
together one or more elements from the current instance.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">plus</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;a&#39;</span> <span class="ow">in</span> <span class="n">t</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;aababbbababbba&#39;</span> <span class="ow">in</span> <span class="n">t</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span> <span class="ow">in</span> <span class="n">t</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;c&#39;</span> <span class="ow">in</span> <span class="n">t</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="describe">
<dt>
<code class="descname">len(a)</code></dt>
<dd></dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fsmcontainer.__len__">
<code class="descname">__len__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fsmcontainer.__len__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fsmcontainer.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of elements in <em>a</em>. If <em>a</em> is a cyclic acceptor with an
infinite number of elements, return <code class="docutils literal"><span class="pre">float('inf')</span></code>.</p>
<p>Note that <code class="xref py py-func docutils literal"><span class="pre">len()</span></code> may be quite slow for large finite numbers of
elements, though it is fast for infinite or small finite numbers. If
you&#8217;re getting the length of <em>a</em> to compare it to a small number,
<a class="reference internal" href="#fsmcontainers.fsmcontainers.fsmcontainer.len_compare" title="fsmcontainers.fsmcontainers.fsmcontainer.len_compare"><code class="xref py py-meth docutils literal"><span class="pre">len_compare()</span></code></a> may be much faster.</p>
</dd></dl>

<dl class="method">
<dt id="fsmcontainers.fsmcontainers.fsmcontainer.len_compare">
<code class="descname">len_compare</code><span class="sig-paren">(</span><em>n</em><span class="optional">[</span>, <em>operator=operator.eq</em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fsmcontainer.len_compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fsmcontainers.fsmcontainers.fsmcontainer.len_compare" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt>
<code class="descname">len_compare</code><span class="sig-paren">(</span><em>other</em><span class="optional">[</span>, <em>operator=operator.eq</em><span class="optional">]</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/fsmcontainers/fsmcontainers.html#fsmcontainer.len_compare"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>With a number as the positional argument, return True if the number of
elements in this instance is equal to <em>n</em> and False otherwise. Or, if a
different comparison operator is specified, return the result of applying
that operator to the number of elements and <em>n</em>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">({</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">len_compare</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">len_compare</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">ge</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">len_compare</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">lt</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>With an iterable as the positional argument, return True if the number of
elements in this instance is the same as the number of elements in
<em>other</em>, which may be an <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a> or any other iterable. Or, if a
different comparison operator is specified, return the result of applying
that operator to the number of elements in this instance and in <em>other</em>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">({</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">len_compare</span><span class="p">([</span><span class="s1">&#39;four&#39;</span><span class="p">,</span> <span class="s1">&#39;five&#39;</span><span class="p">,</span> <span class="s1">&#39;six&#39;</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">len_compare</span><span class="p">(</span><span class="s2">&quot;dog&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">len_compare</span><span class="p">(</span><span class="s2">&quot;aardvark&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>If <em>a</em> is a large finite acceptor, calculating <code class="docutils literal"><span class="pre">len(a)</span></code> can
be very costly, but testing whether the number of elements is less than,
equal to, or greater than a small integer <em>n</em> is fast. Use this method
to avoid the costly full calculation of <code class="docutils literal"><span class="pre">len(a)</span></code> when <em>a</em> is
not known to be small.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/usr/share/dict/words&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> 
<span class="gp">... </span>    <span class="n">a</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">())</span>               
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">len_compare</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                         
<span class="go">False                                        </span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">a</span> <span class="o">&amp;</span> <span class="p">{</span><span class="s1">&#39;supercalifragilisticexpialidocious&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">len_compare</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> 
<span class="go">True                                         </span>
</pre></div>
</div>
<p>Comparison with <code class="docutils literal"><span class="pre">float('inf')</span></code> can be used to determine if an
acceptor is infinite or merely large.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">star</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">len_compare</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/usr/share/dict/words&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> 
<span class="gp">... </span>    <span class="n">a</span> <span class="o">=</span> <span class="n">fsa</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">())</span>               
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">len_compare</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">))</span>              
<span class="go">False                                        </span>
</pre></div>
</div>
<p>Similarly, if <em>this</em> may be large and <em>other</em> is known to be small, or
vice versa, then <code class="docutils literal"><span class="pre">this.len_compare(other)</span></code> will be reliably
fast, while <code class="docutils literal"><span class="pre">len(this)</span> <span class="pre">==</span> <span class="pre">len(other)</span></code> may be quite slow.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="linguistic-applications">
<h2>Linguistic applications<a class="headerlink" href="#linguistic-applications" title="Permalink to this headline">¶</a></h2>
<p>If classes of phonemes are given as lists rather than sets or <a class="reference internal" href="#fsmcontainers.fsmcontainers.fsa" title="fsmcontainers.fsmcontainers.fsa"><code class="xref py py-class docutils literal"><span class="pre">fsa</span></code></a>s, then they can be zipped together and passed to <a class="reference internal" href="#fsmcontainers.fsmcontainers.fst" title="fsmcontainers.fsmcontainers.fst"><code class="xref py py-class docutils literal"><span class="pre">fst</span></code></a> to create a mapping
from each phoneme in the first class to the corresponding phoneme in the second:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">fsmcontainers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">k7ichee7</span> <span class="o">=</span> <span class="n">fsmcontainers</span><span class="o">.</span><span class="n">language</span><span class="p">(</span>
<span class="gp">... </span>             <span class="n">chars</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">ascii</span> <span class="o">|</span> <span class="s2">&quot;á é í ó ú ý ñ ü&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V_short</span> <span class="o">=</span> <span class="s2">&quot;a e i o u&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V_long</span> <span class="o">=</span> <span class="s2">&quot;aa ee ii oo uu&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V_lengthen</span> <span class="o">=</span> <span class="n">k7ichee7</span><span class="o">.</span><span class="n">fst</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">V_short</span><span class="p">,</span> <span class="n">V_long</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V_shorten</span> <span class="o">=</span> <span class="n">V_lengthen</span><span class="o">.</span><span class="n">inv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V_shorten</span><span class="p">[</span><span class="s2">&quot;ii&quot;</span><span class="p">]</span>
<span class="go">&quot;i&quot;</span>
</pre></div>
</div>
<p>Adding an environment with <code class="xref py py-meth docutils literal"><span class="pre">between()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">before()</span></code>, or <code class="xref py py-meth docutils literal"><span class="pre">after()</span></code>
creates a conditional sound change; using <code class="xref py py-attr docutils literal"><span class="pre">anywhere</span></code> creates an unconditional
one:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&#39; b&#39; ch ch&#39; h j k k&#39; l m n o p p&#39;</span>
<span class="gp">... </span><span class="s2">q q&#39; r s t t&#39; tz tz&#39; w x y&quot;&quot;&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V</span> <span class="o">=</span> <span class="n">V_short</span> <span class="o">|</span> <span class="n">V_long</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V_shorten</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">star</span><span class="p">()</span> <span class="o">+</span> <span class="n">V</span><span class="p">)[</span><span class="s2">&quot;nub&#39;aaq&#39;iil&quot;</span><span class="p">]</span>
<span class="go">&quot;nub&#39;aq&#39;iil&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V_shorten</span><span class="o">.</span><span class="n">anywhere</span><span class="p">[</span><span class="s2">&quot;nub&#39;aaq&#39;iil&quot;</span><span class="p">]</span>
<span class="go">&quot;nub&#39;aq&#39;il&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V_shorten</span><span class="p">[</span><span class="s2">&quot;nub&#39;aaq&#39;iil&quot;</span><span class="p">]</span>
<span class="go">KeyError</span>
</pre></div>
</div>
<p>Sound changes can be chained together with <code class="docutils literal"><span class="pre">&#64;</span></code>. For instance, K&#8217;ichee&#8217;
has shortening of vowels in nonfinal syllables, followed by the loss of nonfinal
underlying <em>h</em> with compensatory lengthening. This can be modeled with three
ordered changes:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">C</span> <span class="o">|</span> <span class="n">V</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h_loss</span> <span class="o">=</span> <span class="n">k7ichee7</span><span class="o">.</span><span class="n">fst</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length_changes</span> <span class="o">=</span> <span class="p">(</span><span class="n">V_shorten</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">star</span><span class="p">()</span> <span class="o">+</span> <span class="n">V</span><span class="p">)</span>
<span class="gp">... </span>                  <span class="o">@</span> <span class="n">V_lengthen</span><span class="o">.</span><span class="n">before</span><span class="p">(</span><span class="s2">&quot;h&quot;</span> <span class="o">+</span> <span class="n">X</span><span class="p">)</span>
<span class="gp">... </span>                  <span class="o">@</span> <span class="n">h_loss</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">V</span><span class="p">,</span> <span class="n">X</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length_changes</span><span class="p">[</span><span class="s2">&quot;b&#39;aaq&#39;]</span>
<span class="go">&quot;b&#39;aaq&#39;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length_changes</span><span class="p">[</span><span class="s2">&quot;nub&#39;aaq&#39;iil&quot;</span><span class="p">]</span>
<span class="go">&quot;nub&#39;aq&#39;iil&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length_changes</span><span class="p">[</span><span class="s2">&quot;b&#39;eh&quot;</span><span class="p">]</span>
<span class="go">&quot;b&#39;eh&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length_changes</span><span class="p">[</span><span class="s2">&quot;b&#39;ehnaq&quot;</span><span class="p">]</span>
<span class="go">&quot;b&#39;eenaq&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">&lt;&lt;=</span></code> operator is useful for adding exceptions to an existing
sound change or other rule, since it gives its right operand priority over its
left one. For instance, if our corpus contains a few names where shortening,
<em>h</em>-loss, and compensatory lengthening shouldn&#8217;t apply, we can add them in
after the fact like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exceptions</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;aaron anahí baalam cooper huehuetenango</span>
<span class="gp">... </span><span class="s2">ixtahuacán lehnhoff nahualá&quot;&quot;&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length_changes</span> <span class="o">&lt;&lt;=</span> <span class="n">exceptions</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">length_changes</span><span class="p">[</span><span class="s2">&quot;na b&#39;ehnaq ta ri rak&#39;aalaab&#39; ri a baalam?&quot;</span><span class="p">]</span>
<span class="go">&quot;na b&#39;eenaq ta ri rak&#39;alaab&#39; ri a baalam?&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><p class="first">It is easy to imagine infinite sets that cannot be constructed this way. But
that is the point: the algorithms that make finite state acceptors efficient
aren&#8217;t able to handle arbitrary infinite sets. (Whereas we know that they
<em>can</em> handle infinite sets that are constructed using Kleene star,
intersection, union, subtraction, concatenation, and so on.)</p>
<p class="last">Another way of putting this is that finite state acceptors have less
computational power than Turing machines. That is good news in that it
means we can check strings against them in small finite time. It is bad news
in that it means there are sets whose membership they can&#8217;t decide. In some
domains that tradeoff is acceptable; in others it isn&#8217;t.</p>
</td></tr>
</tbody>
</table>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">fsmcontainers</a><ul>
<li><a class="reference internal" href="#contents">Contents</a></li>
<li><a class="reference internal" href="#finite-state-acceptors">Finite state acceptors</a></li>
<li><a class="reference internal" href="#finite-state-transducers">Finite state transducers</a></li>
<li><a class="reference internal" href="#shared-operations">Shared operations</a></li>
<li><a class="reference internal" href="#linguistic-applications">Linguistic applications</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    

    
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Leah Velleman.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
    </div>

  </body>
</html>